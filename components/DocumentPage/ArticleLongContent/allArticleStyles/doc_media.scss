.doc_media {
	margin: 0 -#{$mobile_gap} 4.6rem -#{$mobile_gap};
	@include media('desktop') {
		clear: both;
		margin: 0 0 35px 0;
	}
	&__figure {
		position: relative;
	}
	&__canvas {
		display: flex;
		align-items: stretch;
	}
	&__enlarge {
		z-index: 1;
		position: absolute;
		top: 15px;
		right: 15px;
		padding: .25rem;
		color: $white;
		font: 2rem/0 a;
		cursor: pointer;
		filter: drop-shadow(0 0 2px rgba(0, 0, 0, .25));
	}
	&__item {
		flex-shrink: 0;
		width: 100%;
		margin-right: -100%;
		padding-bottom: 2.6rem;
	}
	& .photo {
		position: relative;
		padding-bottom: 56.25%;
		background-color: $gray-e;
		text-align: center;
	}
	& .photo--free {
		padding-bottom: 0;
	}
	& .photo iframe,
	&__media {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
	}
	/* у object-fit проблемы под IOS c iframe, поэтому ставим его только для картинок */
	&__media {
		object-fit: contain;
		object-position: 50% 50%;
	}
	@if $amp {
		.doc_media__figure img {
			object-fit: contain;
			object-position: 50% 50%;
		}
	}

	&__caption {
		margin: 3px $mobile_gap 0;
		padding: .7rem 0 .4rem;
		@include media('desktop') {
			margin-top: 1rem;
		}
		& a {
			color: $brand_color;
			text-decoration: underline;
		}
		&--over {
			max-width: 84.8%;
			position: absolute;
			bottom: 11.6%;
			right: 7.6%;
		}
	}
	
	&__caption_limit {
		max-height: calc(1.6rem * 2.2);
		&::after {
			content: '';
			position: absolute;
			top: 100%;
			height: 10px;
			left: 0;
			right: 0;
			box-shadow: 0 0 14px 10px $white;
		}
	}

	&__caption_limit_toggle {
		position: absolute;
		padding: 1rem;
		color: $brand_color;
		font-size: 1.6rem;
		left: 1rem;
		bottom: -3.5rem;
		cursor: pointer;
		will-change: transform;
		transition: .4s cubic-bezier(.05, .69, .14, 1);
		z-index: 1;
		@include media('desktop') {
			bottom: -1rem;
		}
	}
	&__description_trigger:checked ~ &__caption_limit_toggle {
		transform: rotate(-90deg);
	}

	&__text {
		margin-top: -.7rem;
		margin-bottom: -.4rem + 1rem;
		padding: 1px 0;
		color: $gray-1;
		font-size: 1.4rem;
		line-height: 1.6rem;
	}
	&__src {
		color: $gray-6;
	}
	&__canvas {
		position: relative;
	}
	&__nav_button {
		display: flex;
		align-items: center;
		margin-top: calc(56.25% / 2 - 20px);
		filter: drop-shadow(0 0 2px rgba(0,0,0,.25));
	}
	&__nav--prev {
		left: 0;
		&:hover .doc_media__arrow {
			transform: translateX(-5px);
			opacity: 1;
		}
	}
	&__nav--next {
		right: 0;
		&:hover .doc_media__arrow {
			transform: translateX(5px);
			opacity: 1;
		}
	}
	&__nav_icon {
		font-size: 20px;
		fill: $white;
	}
	&__counter {
		position: absolute;
		top: 0;
		right: 0;
		margin-top: 56.25%;
		padding: .5rem 1rem;
		transform: translateY(-100%);
		background-color: rgba(0,0,0,.5);
		color: $white;
		font-size: 1.4rem;
		line-height: 1.6rem;
	}
	& .scrolldiv {
		margin-bottom: 1rem;
		margin-right: $mobile_gap;
		margin-left: $mobile_gap;
	}
}

.modal .doc_media {
	margin: 0;
	width: calc(100% - #{$modal_aside_width + $modal_inner_horizontal_gap + $modal_scroll_width});
	& .adv_300x600 {
		margin: 0 0 $modal_outer_vertical_gap 0;
		background-color: $black;
	}
	&__nav_button {
		position: fixed;
		top: 50%;
		margin-top: -($modal_nav_icon_size + 1rem * 2) * 0.5; // сдвигаем иконку вверх ны половину её высоты
	}
	&__nav_icon {
		font-size: $modal_nav_icon_size;
	}
	&__nav--prev {
		left: ($modal_outer_horizontal_gap - $modal_nav_icon_full_size) * 0.5;
	}
	&__nav--next {
		right: ($modal_outer_horizontal_gap - $modal_nav_icon_full_size) * 0.5 + $modal_scroll_width;
	}
	&__item {
		overflow: hidden;
	}
	& .photo {
		width: 100%;
		height: calc(100vh - #{$modal_outer_vertical_gap * 2});
		margin: 0;
		padding: 0;
		background-color: transparent;
	}
	& .free_photo {
		width: 100%;
		height: calc(100vh - #{$modal_outer_vertical_gap * 2});
		margin: 0;
		background-color: transparent;
	}
	&__media_free {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		object-fit: contain;
		object-position: 50% 50%;
	}
	&__media--blurred {
		object-fit: cover;
		background-color: $black;
		filter: saturate(0%) blur(20px) brightness(.6); // степень размытости фотки подложки
	}
	&__caption {
		margin-left: 0;
		margin-right: 0;
		a {
			color: inherit;
			font-weight: bold;
		}
	}
	&__text {
		margin: 0 0 2rem 0;
		color: $white;
		font-size: 1.6rem;
		line-height: 1.8rem;
	}
	&__src {
		margin-bottom: 0;
		color: $gray-9;
	}
	&__info {
		display: flex;
		flex-flow: row wrap;
		align-items: flex-start;
		margin-top: -.8rem;
	}
	&__info_item {
		visibility: hidden;
		width: 100%;
		margin-right: -100%;
		opacity: 0;
		transition: visibility 0s ease-in-out .4s,
					opacity .4s ease-in-out 0s;
	}
	&__info_item.slider-nav-item-current  {
		visibility: visible;
		opacity: 1;
		transition-delay: 0s;
		transition-duration: .4s;
	}
	&__counter {
		top: auto;
		right: 50%;
		bottom: 0;
		margin-top: 0;
		transform: translateX(50%);
		border-radius: 5px 5px 0 0;
	}
}
.ui-modal--light.modal .doc_media {
	&__text {
		color: $gray-1;
	}
	&__src {
		color: $gray-9;
	}
}

.rubric .doc_media {
	& .photo {
		background-color: transparent;
	}
}
